### **代码**

```js
var hash = new Map()   //定义一个表记忆化搜索
var integerReplacement = function(n) {
    if(n == 1){
        return 0
    }
    if(!hash.has(n)){
        if(n % 2 == 0){
            hash.set(n,1 + integerReplacement(Math.floor(n / 2)))
        }else{
            hash.set(n,2 + Math.min(integerReplacement(Math.floor(n / 2)),integerReplacement(Math.floor(n / 2) + 1)))
        }
    }
    return hash.get(n)
};
```