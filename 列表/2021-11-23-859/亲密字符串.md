### 代码

1.长度不相等直接返回false
2.字符串不同，只交换两个字符后相等，也就是说s[arr[0]] == goal[arr[1]] && s[arr[1]] == goal[arr[0]]
3.字符串相同，保证有一相同的字符可以互换例如：abcda，aa互换字符串不变

```js
var buddyStrings = function(s, goal) {
    let arr = []                                 //记录下标和判断不同字符出现次数
    if(s.length == goal.length){                 //条件1
        for(let i = 0; i < s.length; i++){
            if(s[i] != goal[i]){
                arr.push(i)
            }
        }
        if(arr.length == 2 && s[arr[0]] == goal[arr[1]] && s[arr[1]] == goal[arr[0]]){   //条件2
            return true
        }
        
        if(arr.length == 0){     //相等的时候才考虑
            if(s.length > 26){   //超过26必定重复
                return true
            }
            let hash = new Map()                //hash表以字符本身当key值，hash.get(key)大于1则说明该字符至少出现了两次
            for(let i in s){
                hash.set(s[i].charCodeAt(0),hash.get(s[i].charCodeAt(0)) + 1 || 1)
                if(hash.get(s[i].charCodeAt(0)) > 1){
                    return true
                }
            }
        }
    }
    return false
};
```